---
import Layout from '../layouts/Layout.astro';
import Nav from '../components/home/Nav.astro';
import Hero from '../components/home/Hero.astro';
import Projects from '../components/home/Projects.astro';
import Blog from '../components/home/Blog.astro';
import HomeFooter from '../components/home/Footer.astro';
import { getCollection } from 'astro:content';

const blogPosts = (await getCollection('blog'))
  .sort(
    (a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime()
  )
  .slice(0, 3)
  .map((entry) => ({
    slug: entry.slug,
    title: entry.data.title,
    description: entry.data.description,
    date: entry.data.date,
  }));
---

<Layout
  title="BoltGuo Personal Portfolio Home"
  description="BoltGuo â€” frontend developer and AI explorer crafting minimalist digital experiences."
>
  <div
    class="bg-background-light relative min-h-screen overflow-x-hidden text-gray-900 transition-colors duration-300"
  >
    <div
      class="bg-grid-light bg-grid pointer-events-none fixed inset-0 z-0 opacity-40"
    >
    </div>
    <Nav />
    <Hero />
    <Projects />
    <Blog posts={blogPosts} />
    <HomeFooter />
  </div>
</Layout>
